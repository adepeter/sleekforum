{% extends 'base.html' %}
{% load static %}
{% load cores_util_tags %}
{% load post_tags %}

{% block title %}Latest threads{% endblock %}

{% block content %}
<!-- CONTENT GRID -->
<div class="content-grid">
    {% global_lastpost as lastpost %}
    <!-- SECTION BANNER -->
    <div class="section-banner">
        <!-- SECTION BANNER ICON -->
        <img class="section-banner-icon" src="{% static '/img/banner/forums-icon.png' %}" alt="forum-icon">
        <!-- /SECTION BANNER ICON -->

        <!-- SECTION BANNER TITLE -->
        <p class="section-banner-title">Latest threads</p>
        <!-- /SECTION BANNER TITLE -->

        <!-- SECTION BANNER TEXT -->
        <p class="section-banner-text">Newest topics just started!</p>
        <!-- /SECTION BANNER TEXT -->
    </div>
    <!-- /SECTION BANNER -->

    <div class="section">
        {% include 'vikinger/messages_alert.html' %}
    </div>

    <!-- SECTION FILTERS BAR -->
    <div class="section-filters-bar v7">
        <!-- SECTION FILTERS BAR ACTIONS -->
        <div class="section-filters-bar-actions">
            <!-- SECTION FILTERS BAR INFO -->
            <div class="section-filters-bar-info">
                <!-- SECTION FILTERS BAR TITLE -->
                <p class="section-filters-bar-title">
                    <a href="{% url 'sleekforum:home:home' %}">Home</a><span class="separator"></span>
                    <a href="{% url 'sleekforum:categories:index' %}">Categories</a><span class="separator"></span>Latest
                    topics
                </p>
                <!-- /SECTION FILTERS BAR TITLE -->
                {% if lastpost %}
                <!-- SECTION FILTERS BAR TEXT -->
                <div class="section-filters-bar-text small-space">
                    Last post by
                    <!-- USER AVATAR -->
                    <a class="user-avatar micro no-stats" href="{{ lastpost.user.get_absolute_url }}">
                        <!-- USER AVATAR BORDER -->
                        <div class="user-avatar-border">
                            <!-- HEXAGON -->
                            <div class="hexagon-22-24"></div>
                            <!-- /HEXAGON -->
                        </div>
                        <!-- /USER AVATAR BORDER -->

                        <!-- USER AVATAR CONTENT -->
                        <div class="user-avatar-content">
                            <!-- HEXAGON -->
                            <div class="hexagon-image-18-20" data-src="{{ lastpost.user.get_avatar }}"></div>
                            <!-- /HEXAGON -->
                        </div>
                        <!-- /USER AVATAR CONTENT -->
                    </a>
                    <!-- /USER AVATAR -->
                    <a class="bold" href="{{ lastpost.user.get_absolute_url }}">
                        {{ lastpost.user.get_display_name }}
                    </a> {{ lastpost.created | time_ago }}
                </div>
                <!-- /SECTION FILTERS BAR TEXT -->
                {% endif %}
            </div>
            <!-- /SECTION FILTERS BAR INFO -->
        </div>
        <!-- /SECTION FILTERS BAR ACTIONS -->

        <!-- SECTION FILTERS BAR ACTIONS -->
        <div class="section-filters-bar-actions">
            <!-- FORM -->
            <form class="form">
                <!-- FORM ITEM -->
                <div class="form-item split">
                    <!-- FORM INPUT -->
                    <div class="form-input small">
                        <label for="forum-search">Search Forums</label>
                        <input type="text" id="forum-search" name="forum_search">
                    </div>
                    <!-- /FORM INPUT -->

                    <!-- BUTTON -->
                    <button class="button primary">
                        <!-- ICON MAGNIFYING GLASS -->
                        <svg class="icon-magnifying-glass">
                            <use xlink:href="#svg-magnifying-glass"></use>
                        </svg>
                        <!-- /ICON MAGNIFYING GLASS -->
                    </button>
                    <!-- /BUTTON -->
                </div>
                <!-- /FORM ITEM -->
            </form>
            <!-- /FORM -->

            {% if request.user.is_authenticated %}
            <!-- BUTTON -->
            <p class="button primary popup-event-creation-trigger">+ Create Discussion</p>
            <!-- /BUTTON -->
            {% endif %}
        </div>
        <!-- /SECTION FILTERS BAR ACTIONS -->
    </div>
    <!-- /SECTION FILTERS BAR -->

    {% include 'threads/_includes/thread_list.html' with threads=page_obj %}

</div>
<!-- /CONTENT GRID -->
<!-- POPUP BOX -->
<div class="popup-box small popup-event-creation">
    <!-- POPUP CLOSE BUTTON -->
    <div class="popup-close-button popup-event-creation-trigger">
        <!-- POPUP CLOSE BUTTON ICON -->
        <svg class="popup-close-button-icon icon-cross">
            <use xlink:href="#svg-cross"></use>
        </svg>
        <!-- /POPUP CLOSE BUTTON ICON -->
    </div>
    <!-- /POPUP CLOSE BUTTON -->

    <!-- POPUP BOX TITLE -->
    <p class="popup-box-title">+ Add New topic</p>
    <!-- /POPUP BOX TITLE -->

    <!-- FORM -->
    <form class="form" method="POST" action="{% url 'sleekforum:threads:create_quick_thread' %}">
        {% csrf_token %}
        <!-- FORM ROW -->
        <div class="form-row">
            <!-- FORM ITEM -->
            <div class="form-item">
                <!-- FORM SELECT -->
                <div class="form-select">
                    <label for="category">Category</label>
                    {{ form.category }}
                    <!-- FORM SELECT ICON -->
                    <svg class="form-select-icon icon-small-arrow">
                        <use xlink:href="#svg-small-arrow"></use>
                    </svg>
                    <!-- /FORM SELECT ICON -->
                </div>
                <small class="text-info">{{ form.category.help_text }}</small>
                <small class="text-danger">{{ form.category.errors }}</small>
                <!-- /FORM SELECT -->
            </div>
            <!-- /FORM ITEM -->
        </div>
        <!-- /FORM ROW -->

        <!-- FORM ROW -->
        <div class="form-row">
            <!-- FORM ITEM -->
            <div class="form-item">
                <!-- FORM INPUT -->
                <div class="form-input small active">
                    <label for="title">Thread Title</label>
                    {{ form.title }}
                </div>
                <small class="text-info">{{ form.title.help_text }}</small>
                <small class="text-danger">{{ form.title.errors }}</small>
                <!-- /FORM INPUT -->
            </div>
            <!-- /FORM ITEM -->
        </div>
        <!-- /FORM ROW -->

        <!-- FORM ROW -->
        <div class="form-row">
            <!-- FORM ITEM -->
            <div class="form-item">
                <!-- FORM INPUT -->
                <div class="form-input small">
                    <label for="event-description">Contents</label>
                    <textarea id="event-description" name="{{ form.content.name }}">{{ form.content.value }}</textarea>
                </div>
                <small class="text-danger">{{ form.content.errors }}</small>
                <!-- /FORM INPUT -->
            </div>
            <!-- /FORM ITEM -->
        </div>
        <!-- /FORM ROW -->

        <!-- FORM ROW -->
        <div class="form-row">
            <!-- FORM ITEM -->
            <div class="form-item split join-on-mobile medium">
                <!-- FORM SELECT -->
                <div class="form-select">
                    <label for="prefix">Prefix</label>
                    {{ form.prefix }}
                    <!-- FORM SELECT ICON -->
                    <svg class="form-select-icon icon-small-arrow">
                        <use xlink:href="#svg-small-arrow"></use>
                    </svg>
                    <!-- /FORM SELECT ICON -->
                </div>
                <!-- /FORM SELECT -->

                <!-- FORM SELECT -->
                <div class="form-select">
                    <label for="Tags">Tags</label>
                    {{ form.tags }}
                    <small class="text-info">{{ form.tags.help_text }}</small>
                    <small class="text-danger">{{ form.tags.errors }}</small>
                </div>
                <!-- /FORM SELECT -->
            </div>
            <!-- /FORM ITEM -->
        </div>
        <!-- /FORM ROW -->

        <!-- POPUP BOX ACTIONS -->
        <div class="popup-box-actions medium void">
            <!-- POPUP BOX ACTION -->
            <button type="submit" class="popup-box-action full button secondary">Create thread!</button>
            <!-- /POPUP BOX ACTION -->
        </div>
        <!-- /POPUP BOX ACTIONS -->
    </form>
    <!-- /FORM -->
</div>
<!-- /POPUP BOX -->

{% endblock %}